---
import '../styles/components/model-viewer.css';
---

<div class="model-viewer">
  <div class="viewer-container">
    <div class="model-display" id="modelDisplay">
      <!-- Placeholder state -->
      <div class="placeholder-state" id="placeholderState">
        <div class="placeholder-icon">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <polyline points="21,15 16,10 5,21"></polyline>
          </svg>
        </div>
        <p data-i18n="app.modelViewer.placeholder">Result image will be displayed here</p>
      </div>
      
      <!-- Result image -->
      <div class="result-preview" id="resultPreview" style="display: none;">
        <img id="resultImage" src="" alt="" data-i18n-alt="app.imageAlt.tryOnResult" />
        <div class="result-controls">
          <button class="download-btn" id="downloadBtn" data-i18n-title="app.modelViewer.download">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7,10 12,15 17,10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span data-i18n="app.modelViewer.download">Download</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Processing Modal -->
<div class="processing-modal" id="processingModal" style="display: none;">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3 data-i18n="app.modelViewer.processingTitle">Processing Your Try-On</h3>
    </div>
    <div class="modal-body">
      <div class="processing-animation">
        <div class="spinner-large"></div>
      </div>
      <div class="processing-status">
        <p id="processingStatus" data-i18n="app.modelViewer.processingStatus.submitting">Submitting request...</p>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  import '../scripts/components/ModelViewer.ts';
  import '../i18n/client.ts';
</script>
